"""
spacing_checker.py
ê°„ë‹¨í•œ í•œêµ­ì–´ ë„ì–´ì“°ê¸° ë³´ì • ëª¨ë“ˆ (ì…ë ¥ â†’ êµì • ê²°ê³¼ ì¶œë ¥)

ì‚¬ìš© ì˜ˆì‹œ
---------
python spacing_checker.py

ì…ë ¥: ê·¸ì¼ì€ìµœì„ ì„ë‹¤í• ë§Œí¼ê°€ì¹˜ê°€ìˆë‹¤ê³ í• ë§Œí•˜ë‹¤ í•œë²ˆì— ëë‚´ê³ ì‹¶ë‹¤ ì•Œìˆ˜ìˆë‹¤
êµì •: ê·¸ ì¼ì€ ìµœì„ ì„ ë‹¤í•  ë§Œí¼ ê°€ì¹˜ê°€ ìˆë‹¤ê³  í•  ë§Œí•˜ë‹¤ í•œ ë²ˆì— ëë‚´ê³  ì‹¶ë‹¤ ì•Œ ìˆ˜ ìˆë‹¤
"""

import re

# -----------------------------
# 1. ìì£¼ í‹€ë¦¬ëŠ” ë„ì–´ì“°ê¸° ì‚¬ì „
# -----------------------------
COMMON_ERRORS = {
    "ê·¸ì¼ì€ìµœì„ ì„ë‹¤í• ë§Œí¼ê°€ì¹˜ê°€ìˆë‹¤ê³ í• ë§Œí•˜ë‹¤": "ê·¸ ì¼ì€ ìµœì„ ì„ ë‹¤í•  ë§Œí¼ ê°€ì¹˜ê°€ ìˆë‹¤ê³  í•  ë§Œí•˜ë‹¤",
    "í•œë²ˆì—": "í•œ ë²ˆì—",
    "ë‘ë²ˆì—": "ë‘ ë²ˆì—",
    "ê·¸ëŸ´ìˆ˜ë„": "ê·¸ëŸ´ ìˆ˜ë„",
    "ì •ë§ì¢‹ë‹¤": "ì •ë§ ì¢‹ë‹¤",
    "ë¬¸ì œì—†ë‹¤": "ë¬¸ì œ ì—†ë‹¤",
    "ì§‘ê°€ê³ ì‹¶ë‹¤": "ì§‘ ê°€ê³  ì‹¶ë‹¤",
    "ë‹¤ìŒì£¼ì‹œí—˜": "ë‹¤ìŒ ì£¼ ì‹œí—˜",
    "ì•Œìˆ˜ìˆë‹¤": "ì•Œ ìˆ˜ ìˆë‹¤",
    "í• ìˆ˜ìˆë‹¤": "í•  ìˆ˜ ìˆë‹¤",
    "ë³¼ìˆ˜ìˆë‹¤": "ë³¼ ìˆ˜ ìˆë‹¤",
    "ê°ˆìˆ˜ìˆë‹¤": "ê°ˆ ìˆ˜ ìˆë‹¤",
}

# -----------------------------
# 2. ì •ê·œì‹ ê¸°ë°˜ ìë™ ìˆ˜ì • ê·œì¹™
# -----------------------------
REGEX_RULES = [
    (r"([ê°€-í£]+ê³ )(ì‹¶ë‹¤)", r"\1 \2"),
    (r"([ê°€-í£]+ê³ )(ì‹¶ì–´)", r"\1 \2"),
    (r"([ê°€-í£]+ê³ )(ì‹¶ì–´ìš”)", r"\1 \2"),
    (r"([ê°€-í£]+)(ìˆ˜ìˆë‹¤)", r"\1 ìˆ˜ ìˆë‹¤"),
    (r"([ê°€-í£]+)(í• ë§Œí•˜ë‹¤)", r"\1 í•  ë§Œí•˜ë‹¤"),
]

def _apply_common_errors(text: str) -> str:
    """COMMON_ERRORS ì‚¬ì „ì— ìˆëŠ” í‘œí˜„ì„ ë¨¼ì € ì¼ê´„ êµì •"""
    for wrong, correct in COMMON_ERRORS.items():
        if wrong in text:
            text = text.replace(wrong, correct)
    return text

def _apply_regex_rules(text: str) -> str:
    """ì •ê·œì‹ ê·œì¹™ì„ ì ìš©í•˜ì—¬ ìë™ ë„ì–´ì“°ê¸°"""
    for pattern, repl in REGEX_RULES:
        text = re.sub(pattern, repl, text)
    return text

def correct_spacing(text: str) -> str:
    """ë„ì–´ì“°ê¸° êµì • ë©”ì¸ í•¨ìˆ˜"""
    text = _apply_common_errors(text)
    text = _apply_regex_rules(text)
    return text

# ---------------------------------
# 3. ì…ë ¥ë°›ê³  ì¶œë ¥í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
# ---------------------------------
if __name__ == "__main__":
    while True:
        text = input("\nğŸ“ ë„ì–´ì“°ê¸° ê²€ì‚¬í•  ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš” (ì¢…ë£Œ: q): ")
        
        if text.lower() == "q":
            print("í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.")
            break
        
        result = correct_spacing(text)
        print(f"ğŸ‘‰ êµì • ê²°ê³¼: {result}")
